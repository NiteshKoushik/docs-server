= Compacting Bucket-Data
:page-topic-type: reference

[abstract]
Couchbase Server provides REST APIs for the compaction of data, per bucket.

== Description

All Couchbase and Ephemeral buckets have _auto-compaction_ enabled; whereby compaction of data is performed according to an established schedule.
The corresponding settings, and how they can be established and retrieved by means of the REST API, are provided in the documentation for _Managing Auto-Compaction_ xref:rest-api:rest-autocompact-global.adoc[Globally] and xref:rest-api:rest-autocompact-per-bucket.adoc[Per Bucket].

The HTTP methods and URIs described on the current page are those that support data-compaction, per bucket, through explicit administrator intervention.
_Full_ and _Cluster_ administrator permissions are required.

== HTTP methods and URIs

The following methods and URIs paths are allow explicit initiation and cancellation of data-compaction for a specified bucket:

----
POST /pools/default/buckets/[bucket-name]/controller/compactBucket

POST /pools/default/buckets/[bucket-name]/controller/cancelBucketCompaction
----

== Curl Syntax

----
curl -i -X POST -u [admin]:[password]
  http://[localhost]:8091/pools/default/buckets/[bucket-name]/controller/compactBucket

curl -i -X POST -u [admin]:[password]
  http://[localhost]:8091/pools/default/buckets/[bucket-name]/controller/cancelBucketCompaction
----

== Responses

If successful, `200 OK` is given, and an object containing group-related information is returned.
An incorrectly specified bucket-name or URI gives `404 Object Not Found`.
Failure to authenticate gives `401 Unauthorized`.

== Example

The following example performs compaction on the bucket `travel-sample`:

----
curl -i -v -X POST -u Administrator:password \
http://10.143.193.101:8091/pools/default/buckets/travel-sample/controller/compactBucket
----

The following example cancels a previously initiated compaction-operation on the `travel-sample` bucket:

----
curl -i -v -X POST -u Administrator:password \
http://10.143.193.101:8091/pools/default/buckets/travel-sample/controller/cancelBucketCompaction
----

== See Also

REST APIs for establishing and retrieving auto-compaction settings are provided in xref:rest-api:rest-autocompact-global.adoc[Managing Auto-Compaction: Globally] and xref:rest-api:rest-autocompact-per-bucket.adoc[Managing Auto-Compaction: Per Bucket].

See xref:manage:manage-settings/configure-compact-settings.adoc[Auto-Compaction], for information on managing auto-compaction with Couchbase Web Console.
